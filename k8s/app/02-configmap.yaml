apiVersion: v1
kind: ConfigMap
metadata:
  name: kyc-blockchain-config
  namespace: kyc-blockchain
  labels:
    app.kubernetes.io/name: kyc-blockchain
data:
  config.json: |
    {
      "server": {
        "host": "0.0.0.0",
        "port": 8080,
        "read_timeout": 30,
        "write_timeout": 30,
        "idle_timeout": 120
      },
      "database": {
        "host": "postgres-service",
        "port": 5432,
        "user": "postgres",
        "dbname": "kyc_blockchain",
        "sslmode": "require",
        "max_open_conns": 25,
        "max_idle_conns": 5,
        "conn_max_lifetime": 300
      },
      "blockchain": {
        "difficulty": 4,
        "max_tx_per_block": 100,
        "block_time": 10
      },
      "jwt": {
        "token_expiry": 3600,
        "refresh_expiry": 86400,
        "issuer": "kyc-blockchain-system"
      },
      "crypto": {
        "key_store_path": "/app/keys",
        "algorithm": "RSA",
        "key_size": 2048
      },
      "consensus": {
        "type": "raft",
        "namespace": "",
        "node_id": "",
        "discovery_method": "kubernetes",
        "headless_service": "kyc-blockchain-headless",
        "election_timeout": 1000,
        "heartbeat_interval": 150
      },
      "verification": {
        "provider": "mock",
        "auto_approve": false,
        "min_score": 80
      },
      "monitoring": {
        "enabled": true,
        "metrics_port": 9090,
        "log_level": "info"
      }
    }

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-config
  namespace: kyc-blockchain
  labels:
    app.kubernetes.io/name: postgres
data:
  POSTGRES_HOST_AUTH_METHOD: "scram-sha-256"
  PGDATA: "/var/lib/postgresql/data/pgdata"